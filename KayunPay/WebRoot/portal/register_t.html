<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="format-detection" content="telephone=no" />
<meta name = "viewport" content ="width=device-width,initial-scale=1.0,user-scalable=no,target-densitydpi=device-dpi"/>
<title>注册_t</title>
<link type="text/css" href="/portal/css/login.css" rel="stylesheet">
</head>
<body>
	<div class="phone_title">注册</div>
	<div class="phone_con">
		<div class="phone_input">
			<label><img src="/portal/images/icons/reg_t1.jpg"/></label> <input type="text" class="uNickName" maxlength="10" placeholder="昵称须为2~10个字，不能全为数字"/>
		</div>
		<div class="phone_input">
			<label><img src="/portal/images/icons/reg_t2.jpg"/></label> <input type="text" class="uPhone" maxlength="11" placeholder="请输入11位数字有效手机号"/>
		</div>
		<div class="phone_input">
			<label><img src="/portal/images/icons/reg_t3.jpg"/></label> <input type="password" class="uPwd" maxlength="15" placeholder="请输入6位以上的密码"/>
		</div>
		<div class="phone_input">
			<label><img src="/portal/images/icons/reg_t3.jpg"/></label> <input type="password" class="uPwdCheck" maxlength="15" placeholder="请重复输入密码"/>
		</div>
		<div class="phone_input">
			<label><img src="/portal/images/icons/reg_t2.jpg"/></label> <input type="text" class="uReferee" maxlength="11" placeholder="请输入推荐人手机号(选填)"/>
		</div>
		<div class="phone_input code">
			<label><img src="/portal/images/icons/reg_t4.jpg"/></label> <input type="text" class="uCheckCode" maxlength="6" placeholder="请输入验证码"/>
			<span class="getCode"><i id="sendMsgBtn" sendToggle="0">获取验证码</i><b id="msgCounter"></b></span>
		</div>
		<div class="agreement_t">
			<div class="submitBtn">立即注册</div>
		</div>
	</div>
	<div class="phone_suc">
		<div class="suc_show">
			<img src="/portal/images/icons/suc.png"/>
			<p>注册成功</p>
		</div>
	</div>
	<script type="text/javascript" src="/portal/js/pub/jquery-1.7.1.min.js"></script>
	<script type="text/javascript" src="/portal/js/pub/core.js"></script>
	<script type="text/javascript" src="/portal/js/config.js"></script>
	<script type="text/javascript" src="/portal/js/user.js"></script>
<script>
$.registerFn = function(){

	var uNickName = $(".uNickName").val();
	var uPhone = $(".uPhone").val();
	var uPwd = $(".uPwd").val();
	var uPwdCheck = $(".uPwdCheck").val();
	var uCheckCode = $(".uCheckCode").val();
	var numRule = new RegExp("^[0-9]*$") ;
	var uReferee = $(".uReferee").val();
	
	alert('恭喜您注册成功!');
	$('.phone_title').hide();
	$('.phone_con').hide();
	$('.phone_suc').show();
	/*if( uNickName.length < 2  ){
		alert('昵称须为2~10个字');
		$(".uNickName").focus();
		return false;
	}

	if (numRule.test(uNickName)) {
		alert('昵称不能全为数字');
		$(".uNickName").focus();
		return false;
	}

	if( uPhone.length == 0 || uPhone.length != 11 ){
		alert('请输入11位数字有效手机号!');
		$(".uPhone").focus();
		return false ;
	}

	if( uPwd.length < 6  ){
		alert('请输入6位以上的密码!');
		$(".uPwd").focus();
		return false ;
	}
	if( uPwd != uPwdCheck ){
		alert('确认密码不匹配!');
		$(".uPwdCheck").focus();
		return false ;
	}

	if( uPhone == uReferee ){
		alert('推荐人不能为自己!');
		$(".uReferee").focus();
		return false ;
	}
	if( uCheckCode.length == 0 || uCheckCode.length > 6){
		alert('验证码不正确!');
		$(".uCheckCode").focus();
		return false ;
	}
	YRHX.ajax({
		url : CONFIG.getRequestURI("register"),
		data : {
			userName    : uNickName ,
			userMobile  : uPhone ,
			loginPasswd : uPwd,
			uCheckCode  : uCheckCode,
			fMobile     : uReferee
		},
		success : function(sucData ){
			alert('恭喜您注册成功!');
			$('.phone_title').hide();
			$('.phone_con').hide();
			$('.phone_suc').show();
		},
		error : function(errData ){
			alert(errData.return_info);
		}
	});*/
};

$(".submitBtn").click(function(){
	$.registerFn();
});
//发送验证码
$('#sendMsgBtn').click(function(){
	if( $(".uPhone").val().length == 11 ){
		$("#sendMsgBtn").sendMsg({
			"msgCounter" : "#msgCounter",
			"msgTips"    : "#msgTips",
			"type"       : "0",
			"urPhone"    : $(".uPhone").val(),
			"url"		 : "nSendMsgMobile"
		});
	}else{
		alert('请认真填写您的手机号码!');
	}
	
})
</script>
</body>
</html>