<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>易融恒信-安全可靠透明的投资平台,p2p网贷平台</title>
    <meta name="keywords" content="易融恒信,网贷平台,p2p网贷平台排名,p2p投资,p2b网贷,p2p投资平台,小投资,武汉贷款,武汉小额投资,武汉网贷公司,武汉易融恒信"/>
    <meta name="description" content="易融恒信,致力于做华中地区最好的p2p网贷平台,为投资者提供最安全,最靠谱,最透明的互联网金融p2p投资平台,咨询电话400-027-0707"/>
	<link href="/portal/css/public.css?v=1.0.1" rel="stylesheet" media="screen" type="text/css" charset="utf-8" />
	<link href="/portal/css/wylc.css?v=1.0.0" rel="stylesheet" media="screen" type="text/css" charset="utf-8" />
	<!--[if lt IE 9]><script src="/portal/js/html5shiv.min.js"></script><![endif]-->
</head>

<body>
	<header id="header" class="header"></header>
	<main class="main_grey">
		<div class='info_mes'>
			<div class="layout_center">
				<div class="project_info new">
				</div>
			</div>
		</div>
		<div class="project_main layout_center menu">
			<ul>
				<li class="active">项目描述</li>
				<li>借款人基本资料</li>
				<li id="loanPics">借款人图片资料</li>
				<li id="bidHistory">投标记录</li>
				<li id="padBackDetail" style="display:none;">还款详情</li>
				<i></i>
			</ul>
			<div id="tabContent">
				<div class="project_description tab-content-list">
					<h4>一、基本情况描述</h4>
					<p class="loanBaseDesc">
					</p>
					<h4>二、借款用途</h4>
					<p class="loanUsedDesc">
					</p>
					<h4>三、提供资料</h4>
					<p class="loanerDataDesc">
					</p>
					<h4>四、外勤考察</h4>
					<p class="loanInvDesc">
					</p>
					<h4>五、风控审核</h4>
					<p class="loanRiskDesc">
					</p>
					<h4>六、其它： </h4>
					<p class="loanDesc">
					</p>
				</div>
				<div class="borrower_information tab-content-list" style="display:none">
					<div class="s_text0">易融恒信将最大程度地核实借入者信息的真实性，保障审核信息100%真实，如果借入者逾期达30天，借入者提供的信息将被公布。</div>
					<div class="list">
						<div class="list_mery credit_information">
							<h4>借入者信用信息</h4>
							<div class="credit_information_main"></div>
						</div>
						<div class="list_mery loan_record">
							<h4>贷款记录</h4>
							<div class="loan_record_main">
								<div><label>发布贷款：</label>1</div>
								<div><label>成功贷款：</label>0</div>
								<div><label>还清笔数：</label>0</div>
								<div><label>逾期次数：</label>0</div>
								<div><label>严重逾期：</label>0</div>
								<div><label>待还金额：</label>0.00</div>
								<div><label>共计借入：</label>0.00</div>
								<div><label>逾期金额：</label>0.00</div>
							</div>
						</div>
					</div>
					<div class="audit_record">
						<h4>易融恒信审核记录</h4>
						<dl>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;身份证认证</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;工作认证</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;信用报告</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;收入认证</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;房产认证</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;购车认证</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;婚姻证明</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;学历认证</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;居住地证明</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;实地认证</dd>
							<dd><i></i><span class="icon icon-right"></span>&nbsp;&nbsp;其他材料认证</dd>
						</dl>
					</div>
				</div>
				<div class="borrower_images tab-content-list" style="display:none">
					<div class="borrower_images_box">
						<!-- <img src="/portal/images/borrowImage01.jpg" class="viewImg"> -->
					</div>
				</div>
				<div class="bid_history tab-content-list" style="display: none">
					<div class="bid_history_box">
						<div class="bid_history_top">
							<span>目前投标总额：<i class="mqtbze">0</i></span>
							<span>剩余投标金额：<i class="sytbje">0</i></span>
							<!-- <span>满标总耗时：<i class="mbzhs">0</i></span> -->
						</div>
						<table class="wylc tab_traces">
							<thead>
								<tr>
									<th>序号</th>
									<th>投标人</th>
									<th>投标金额</th>
									<th>投标时间</th>
									<th>投标方式</th>
								</tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
				</div>
				<div class="pay-back-detail tab-content-list" style="display: none;">
					<table class="wylc" id="payBackTable">
						<thead>
							<tr>
								<th>还款时间</th>
								<th>应还本息</th>
								<th>应还本金</th>
								<th>应还利息</th>
								<th>状态</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td><span class="bid_history_num">1</span></td>
								<td>2015-05-11 18:00:02</td>
								<td>¥7,414</td>
								<td>¥7,414</td>
								<td>还款成功</td>
							</tr>
							<tr>
								<td><span class="bid_history_num">2</span></td>
								<td>2015-05-11 18:00:02</td>
								<td>¥7,40014</td>
								<td>¥7,40014</td>
								<td>还款中</td>
							</tr>
							<tr>
								<td><span class="bid_history_num">3</span></td>
								<td>2015-05-11 18:00:02</td>
								<td>¥7,414</td>
								<td>¥7,414</td>
								<td>提前还款</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</main>
	<div class="couponDialog" id="couponDialog" style="display:none;">
		<h3>确认信息
			<div class="del"></div>
		</h3>
		<div class="coupon_bid">
			<dl>
				<dt>本次投资金额</dt>
				<dd>
					<font class="this_amount"></font>元</dd>
			</dl>
			<dl>
				<dt>预计赚取收益</dt>
				<dd>
					<font class="this_income"></font>元</dd>
			</dl>
		</div>
		<div class="coupon_mes">
			<div class="user-quan" >
			<ul	class="mn">
				<li id="usable" class="act" ttype="A">现金券</li>
				<li id="usable2" ttype="C">加息券</li>
				<li id="usable3" ttype="D">加息额度</li>
			</ul>
			</div>
			<div class="coupon_none" style="display:none;"></div>
			<div class="coupon_none2" style="display:none;"></div>
			<div class="coupon_detail">
				<i class="coupon_iconl"></i>
				<i class="coupon_iconr"></i>
				<div class="icon_list"></div>
				<div class="coupon_list">
				<ul></ul>
				</div>
				<div class="coupon_selected">投资成功</div>
			</div>
		</div>
		<div class="coupon_foot">实际支出
			<font></font>元<button class="coupon_confirm">立即投资</button><button class="coupon_cancle">取消</button></div>
		<div class="suc_next">
			<h3>投标状态
				<div class="del"></div>
			</h3>
			<div class="suc_icon">
				恭喜你，投标成功！
			</div>
			<!-- <div class="coupon_selected">自动投标收益更高：1-6月标加息 <i>+<strong>0.3</strong>%</i><br />
			<s></s>7-18月标加息 <i>+<strong>0.5</strong>%</i>
			<a href="/A04">去设置</a>
		</div> -->
			<div class="coupon_foot"><a href="/Z02?navTab=1">继续投资</button><a class='next_close'>关闭</a></div>
		</div>
	</div>
	<input type="hidden" id="loanCode" value="" />
	<footer id="footer" class="footer"></footer>
	<script type="text/javascript" src="/portal/js/pub/jquery-1.7.1.min.js?v=1.0.0"></script>
	<script type="text/javascript" src="/portal/js/pub/core.js?v=1.0.0"></script>
	<script type="text/javascript" src="/portal/js/config.js?v=1.0.0"></script>
	<script>
		topNavSelect = 1;
	</script>
	<script type="text/javascript" src="/portal/js/public.js?v=1.0.0"></script>
	<script type="text/javascript" src="/portal/js/wylc.js?v=1.0.0" charset="utf-8"></script>
	<script type="text/javascript" src="/portal/js/pub/app.js?v=1.0.0"></script>
	<script type="text/javascript" src="/portal/js/circleProgress.js?v=1.0.0"></script>
	<script type="text/javascript">
		var flag = false;
		var isnoobbid = false;
		function loginSuccessCallback() {
			window.location.reload();
		}
		$("#loanCode").val(YRHX.queryString("loanCode"));
		$.fn.tabChange = function (selector) {
			var that = $(this);
			that.click(function () {
				$(this).addClass('active').siblings().removeClass('active');
				var index = $(this).index();
				$('.project_main ul i').css('left', 190 * index + 'px');
				$('.' + selector + '-list').hide();
				$('.' + selector + '-list:eq(' + index + ')').show();
			})
		};

		$(".menu li").tabChange("tab-content");

		initData();

		//标书主体信息模板
		var html_loanInfo_main = "<div class='bid_mes'>";
		html_loanInfo_main += "<div class='bid_left'>"
		html_loanInfo_main +=
			"<h1><span>#{loanTitle}</span><i class='way_icon' title='#{refundTypeTitle}'>#{refundTypeStr}</i><span class='new_bid_ico' style='display:#{new_bid_ico}'></span><b id='timePlace' isTime=#{isTime} startTime=#{startTime} endTime=#{endTime} releasetime=#{releaseTimeStamp}>#{bidTimeDesc}</b><b class='safeNo'></b></h1>";
		html_loanInfo_main = html_loanInfo_main + "<div class='project_data1'>";
		html_loanInfo_main = html_loanInfo_main + "<div class='annual_interest_rate'>";
		html_loanInfo_main = html_loanInfo_main + "<span class='num'>#{rateByYearPlus}<font>%</font><span class='otherRate' style='display:#{show_state}'>+#{rewardRateByYear}<plus style=font-size:14px>%</plus></span><span class='otherRate' style='display:#{show_benefits4new}'>+#{benefits4newStr}<plus style=font-size:14px>%</plus></span><span style='display:#{firstMonthMini};margin-left:4px;margin-bottom:3px'><img style='width:31px;height:18px' src='/portal/images/firstMonthMini.png'></span></span>";
		html_loanInfo_main = html_loanInfo_main + "<span class='text'>年利率</span>";
		html_loanInfo_main = html_loanInfo_main + "</div>";
		html_loanInfo_main = html_loanInfo_main + "<div class='time_limit'>";
		html_loanInfo_main = html_loanInfo_main + "<span class='num'><strong>#{loanTimeLimit}</strong>月</span>";
		html_loanInfo_main = html_loanInfo_main + "<span class='text'>#{refundTypeStr}</span>";
		html_loanInfo_main = html_loanInfo_main + "</div>";
		html_loanInfo_main = html_loanInfo_main + "<div class='money'>";
		html_loanInfo_main = html_loanInfo_main + "<span class='num'><strong>#{loanAmountStr}</strong>万</span>";
		html_loanInfo_main = html_loanInfo_main + "<span class='text'>金额</span>";
		html_loanInfo_main = html_loanInfo_main + "</div>";
		html_loanInfo_main = html_loanInfo_main + "<div class='report_form'>";
		html_loanInfo_main = html_loanInfo_main +
			"<div class='perCircleBox'><div class='circle-progress' data-progress=#{progress} data-size='55'></div></div>";
		html_loanInfo_main = html_loanInfo_main + "</div>";
		html_loanInfo_main = html_loanInfo_main + "</div>";
		/* html_loanInfo_main = html_loanInfo_main + "<div class='bid_point'><b id='timePlace' isTime=#{isTime} startTime=#{startTime} endTime=#{endTime}>#{bidTimeDesc}</b><span>剩余可投金额：<i>#{loanBalanceStr}</i>元</span></div>"; */
		html_loanInfo_main = html_loanInfo_main + "</div>";
		html_loanInfo_main = html_loanInfo_main + "<div class='bid_right'>";
		html_loanInfo_main = html_loanInfo_main + "<div class='bid_leave'>剩余可投金额：<i>#{loanBalanceStr}</i>元</div>";
		html_loanInfo_main = html_loanInfo_main +
			"<div class='bid_title'>账号余额:<i class='uAvBalance'>#{avBalanceStr}</i><a href='/B02' class='red' id='goChage'></a></div>"
		html_loanInfo_main = html_loanInfo_main + "<div id='isShow'' class='#{isShow}'>";
		html_loanInfo_main = html_loanInfo_main +
			"<div class='canVoteBox'><input type='text' maxlength='8' placeholder='输入投标金额' class='canVoteInput' refundType='#{refundType}' querytoggle='0' loanCode=#{loanCode} maxloanamount=#{maxLoanAmount} loanbalance=#{loanBalance}></div>";
		html_loanInfo_main = html_loanInfo_main + "<div class='expect_fee'>预期收益：<span>0</span>元</div>";

		html_loanInfo_main = html_loanInfo_main + "</div>";
		html_loanInfo_main = html_loanInfo_main +
			"<button id='voteBtn' class='#{voteBtnClass}' loanMonth='#{loanTimeLimit}' loanBalance='#{loanBalance}'>#{loanStateName}</button>";
		html_loanInfo_main = html_loanInfo_main + "<div class='bid_point'>易融温馨提示：投资有风险，我们有保障</div>";
		/* html_loanInfo_main = html_loanInfo_main + "<div class='has_read'><input type='checkbox' checked>我已经阅读并同意<a href='#'>《易融恒信服务协议》</a></div>";  */
		html_loanInfo_main = html_loanInfo_main + "</div>";
		html_loanInfo_main = html_loanInfo_main + "</div>";

		var credit_information_main = "<div><label>借款用户：</label>#{loanUserName}</div>" +
			"<div><label>婚姻状况：</label>#{hasMarital}</div>" +
			"<div><label>从事行业：</label> #{userCSHY}</div>" +
			"<div><label>职      位：</label> #{userZW}</div>" +
			"<div><label>有无购房：</label> #{hasHouse}</div>" +
			"<div><label>有无购车：</label> #{hasCar}</div>" +
			"<div><label>有无房贷：</label> #{hasMortgage}</div>" +
			"<div><label>有无车贷：</label> #{hasCarLoan}</div>" +
			"<div><label>联系地址：</label> #{loanAddress}</div>";



		function initData() {
			if (YRHX.Cookie("userCode").get()) {
				var ajaxUrl = "queryBidDetail";
			} else {
				var ajaxUrl = "queryBidDetailNoLogin";
			}
			YRHX.ajax({
				url: CONFIG.getRequestURI(ajaxUrl),
				data: {
					loanCode: $("#loanCode").val()
				},
				success: function (sucData) {

					YRHX.ajax({
						url: CONFIG.getRequestURI('queryCFCA'),
						data: {
							bCode: sucData.loanCode //'256f21b46ffc4364b3f1bdb0064c17bb'
						},
						success: function (sucData) {
							//var sucData = {}
							//sucData.recordNo = '256f21b46ffc4364b3f1bdb0064c17bb'
							if( sucData ){
								$(".bid_left").addClass('safeIn');
								$(".safeNo").html("保全号：<a target='_blank' style='color:#FF5254' href=" + CONFIG.SAFEINURL +sucData.recordNo +">" + sucData.recordNo+"</a>");
							}

						},
						error: function (errData) {

						}
					})
					/* if(sucData["contractNo"]){
						sucData["contractNo"] = "借款合同号：" + sucData["contractNo"];
					}else{
						sucData["contractNo"] = "";
					} */
					//还款方式
					if (sucData["refundType"] == "A") {
						sucData["refundTypeStr"] = "等额本息";
						sucData["refundTypeTitle"] = "按月等额本息";
					} else if (sucData["refundType"] == "B") {
						sucData["refundTypeStr"] = "先息后本";
						sucData["refundTypeTitle"] = "按月付息，到期还本";
					}
					/*else if(sucData["refundType"] == "C"){
						sucData["refundType"] == "到期还本息";
					}*/
					//总共年利率 单位如 19.20% 等于 1920[计算利息]
					sucData["rateByYearTotle"] = parseFloat(sucData["rateByYear"]) + parseFloat(sucData["rewardRateByYear"]) +
						parseFloat(sucData["benefits4new"]);
					thisrate=sucData["rateByYearTotle"];
					thisloanmonth=sucData["loanTimeLimit"];
					thisrefundType=sucData["refundType"];
					//总共年利率显示
					if (sucData["rewardRateByYear"] > 0 || sucData["benefits4new"] > 0) {
						//sucData["rateByYearPlus"] =  parseFloat(sucData["rateByYear"] / 100) + parseFloat((sucData["rewardRateByYear"] +  sucData["benefits4new"]) / 100) ;
						sucData["rateByYearPlus"] = sucData["rateByYear"] / 100 ;
						sucData["rewardRateByYear"] = parseFloat(sucData["rewardRateByYear"] / 100);
					} else {
						sucData["rateByYearPlus"] = sucData["rateByYear"] / 100;
					}
					if (parseFloat(sucData['benefits4new']) != 0 || parseFloat(sucData['rewardRateByYear']) == 0) {
						sucData["show_state"] = 'none';
					} else {
						sucData["show_state"] = 'inline-block'
					}
					if (sucData["benefits4new"] > 0) {
						isnoobbid=true;
						sucData["new_bid_ico"] = 'inline-block'
						sucData["show_benefits4new"] = 'inline-block'
						sucData["benefits4newStr"] = sucData["benefits4new"] / 100
					}
					if ("yes" == sucData["ifShow"]) {
    					sucData["firstMonthMini"]="inline-block";
    				} else {
    					sucData["firstMonthMini"]="none";
    				}
					sucData['releaseTimeStamp'] = sucData["releaseDate"] + sucData["releaseTime"];
					//标金额
					sucData["loanAmountStr"] = sucData["loanAmount"] / 1000000;

					//我的余额 兼容
					if (sucData["avBalance"]) {
						sucData["avBalanceStr"] = YRHX.toDecimal2(sucData["avBalance"] / 100) + '元';
					} else {
						sucData["avBalanceStr"] = 0;
						sucData["avBalance"] = 0;
					}
					//标题

					if (sucData["benefits4new"] > 0) {
						sucData["loanTitle"] = (sucData['minLoanAmount'] / 100) + '元起投 限额' + (sucData['maxLoanAmount'] / 100);
					} else {
						var type = sucData['productType'];
						switch (type) {
							case 'A':
								sucData['loanTitle'] = '质押宝 ' + sucData['loanNO'];
								break;
							case 'B':
								sucData['loanTitle'] = '车稳盈 ' + sucData['loanNO'];
								break;
							case 'C':
								sucData['loanTitle'] = '房稳赚 ' + sucData['loanNO'];
								break;
							default:
								sucData["loanTitle"] = dealTitle(sucData["loanTitle"]);
								break;
						}
					}
					//百分比    余额/总额
					var tmpAmount = parseFloat(sucData["loanAmount"]);
					var tmpBalance = parseFloat(sucData["loanBalance"]);
					if (tmpBalance == 0) {
						sucData["progress"] = 100;
					} else if (tmpBalance == tmpAmount) {
						sucData["progress"] = 0;
					} else {
						sucData["progress"] = tmpBalance == 0 ? 0 : (tmpBalance / tmpAmount) * 100;

						sucData["progress"] = Math.floor(100 - sucData["progress"]);
					}

					sucData["progress_p"] = (sucData["progress"] - 1) * 83.46;
					if (sucData["progress"] == 0) {
						sucData["Zper"] = "Zper";
					} else {
						sucData["Zper"] = "";
					}


					//剩余可投金额
					sucData["loanBalanceStr"] = YRHX.toDecimal2(sucData["loanBalance"] / 100);


					//最小投资金额
					sucData["minLoanAmount"] = YRHX.toDecimal2(sucData["minLoanAmount"] / 100) + '元';
					//满标未跑满标任务兼容
					if (sucData["loanState"] == "J" && sucData["loanBalance"] == 0) {
						sucData["loanState"] = "M";
					}

					//标书状态模板数据				
					if (sucData["loanState"] == "J") {

						if (sucData["serverTime"] < sucData["releaseDate"] + sucData["releaseTime"]) {
							//定时标
							sucData["voteBtnClass"] = "grayBtn";
							sucData["loanStateName"] = "即将开始，等待发布";
							sucData["startTime"] = strDate2Date(sucData["serverTime"]);
							sucData["endTime"] = strDate2Date(sucData["releaseDate"] + sucData["releaseTime"]);
							sucData["isTime"] = 1;
							sucData["bidTimeDesc"] = '即将开始，等待发布';
						} else {
							sucData["isShow"] = "showTime";
							//3天倒计时
							sucData["voteBtnClass"] = "redBtn have";
							sucData["loanStateName"] = "立即投标";
							var releaseTimeStamp = sucData["releaseDate"] + sucData["releaseTime"];
							var countLeftTimeStr = countLeftTime(strDate2Date(releaseTimeStamp), 3);
							if (countLeftTimeStr) {
								sucData["bidTimeDesc"] = "剩余时间：" + countLeftTimeStr;
							} else {
								sucData["bidTimeDesc"] = "剩余时间：已过期";
							}


						}
					} else if (sucData["loanState"] == "M") {
						sucData["voteBtnClass"] = "blueBtn";
						sucData["bidTimeDesc"] = '满标时间：' + sucData["lastPayLoanDateTime"].dateformat();
						sucData["loanStateName"] = "满标待审";
					} else if (sucData["loanState"] == "N") {
						sucData["voteBtnClass"] = "grayBtn";
						sucData["bidTimeDesc"] = '满标时间：' + sucData["lastPayLoanDateTime"].dateformat();
						sucData["loanStateName"] = "还款中";
					} else if (sucData["loanState"] == "O") {
						sucData["voteBtnClass"] = "grayBtn";
						sucData["bidTimeDesc"] = '满标时间：' + sucData["lastPayLoanDateTime"].dateformat();
						sucData["loanStateName"] = "已完成";
					} else if (sucData["loanState"] == "P") {
						sucData["voteBtnClass"] = "grayBtn";
						sucData["bidTimeDesc"] = '满标时间：' + sucData["lastPayLoanDateTime"].dateformat();
						sucData["loanStateName"] = "已完成[提前还款]";
					} else if (sucData["loanState"] == "L") {
						sucData["voteBtnClass"] = "grayBtn";
						sucData["bidTimeDesc"] = '已流标';
						sucData["loanStateName"] = "已流标";
					} else {
						sucData["voteBtnClass"] = "grayBtn";
						sucData["bidTimeDesc"] = '其他状态';
						sucData["loanStateName"] = "其他状态";
					}

					//借款人图片资料预处理
					if (sucData['loanPic']) {
						window.loanPics = JSON.parse(sucData['loanPic']);
					} else {
						window.loanPics = "";
					}

					//还款详情
					if (sucData["effectTime"] && YRHX.Cookie("userCode").get()) {
						$("#padBackDetail").show();
						$("#padBackDetail").attr({
							"loanTimeLimit": sucData['loanTimeLimit'],
							"reciedCount": sucData["reciedCount"],
							"refundtype": sucData["refundType"],
							"rateByYearTotle": sucData["rateByYearTotle"],
							"payAmount": sucData["loanAmount"],
							"effectDate": sucData["effectDate"].dateformat(),
							"loanState": sucData["loanState"]
						})
					}

					//借款人基本资料
					if (sucData["loanUserInfo"]) {

						if (sucData["loanUserInfo"]) {
							var tmpObj = JSON.parse(sucData["loanUserInfo"]);
						} else {
							var tmpObj = "";
						}
						if (tmpObj["hasMarital"] == "1") {
							tmpObj["hasMarital"] = "已婚";
						} else if (tmpObj["hasMarital"] == "0") {
							tmpObj["hasMarital"] = "未婚";
						}
						for (var tk in tmpObj) {
							sucData[tk] = tmpObj[tk];
							if (sucData[tk] == "1") {
								sucData[tk] = "有";
							} else if (sucData[tk] == "0") {
								sucData[tk] = "无";
							}
						}
					}



					//兼容缺少字段老数据
					sucData["loanUserName"] = sucData["loanUserName"] || "";
					sucData["hasMarital"] = sucData["hasMarital"] || "";
					sucData["userCSHY"] = sucData["userCSHY"] || "";
					sucData["userZW"] = sucData["userZW"] || "";
					sucData["hasHouse"] = sucData["hasHouse"] || "";
					sucData["hasCar"] = sucData["hasCar"] || "";
					sucData["hasMortgage"] = sucData["hasMortgage"] || "";
					sucData["hasCarLoan"] = sucData["hasCarLoan"] || "";
					sucData["loanAddress"] = sucData["loanAddress"] || "";

					//新手专享标
					if (sucData["benefits4new"] > 0) {

						var newBidDes = "<t>【此借款标最高可投金额为" + sucData["maxLoanAmount"] / 100 + "元整】</t>";
						sucData["loanDesc"] = newBidDes + sucData["loanDesc"];
					}
					//标书缩略图
					if (sucData["loanThumbnail"] && sucData["loanThumbnail"] != "[]") {
						var loanThumbnailPic = "http://image1.yrhx.com/" + JSON.parse(sucData["loanThumbnail"])[0]["code"] + "/head";
					}

					sucData["bidImage"] = loanThumbnailPic || '/portal/images/investbidImage.jpg';

					//渲染
					var tmpHtml = html_loanInfo_main.makeHtml(sucData);


					$(".project_info").append(tmpHtml);
					circleProgress.refresh();

					$(".credit_information_main").html(credit_information_main.makeHtml(sucData));
					if (null != sucData["loanDesc"]) {
						$(".project_description").html(sucData["loanDesc"].replace("π=3.14159265358", ""));
					}


					/* ======================================== 渲染END ================================================ */
					//监听倒计时
					function initInterval() {
						setInterval(function () {
							var that = $("#timePlace");
							var isTime = that.attr("istime");
							if (isTime == 1) {
								var startTime = parseInt(that.attr("starttime"));
								var endTime = parseInt(that.attr("endtime"));

								var showText = "";
								var mv = (endTime - startTime) / 1000;

								if (mv <= 0) {
									var countLeftTimeStr = countLeftTime(strDate2Date(that.attr('releasetime')), 3);
									that.attr('istime', 0);
									that.text("剩余时间：" + countLeftTimeStr);
									$("#isShow").show();
									$("#voteBtn").removeClass("grayBtn").addClass("redBtn have").text("立即投标")
								} else {
									if (mv % 60 > 0) {
										showText += (mv % 60) + "秒";
									}
									var tmpv = mv / 3600;
									if (Math.floor(mv / 60) > 0) {
										showText = Math.floor(mv / 60 % 60) + "分" + showText;
									}
									if (tmpv >= 1) {
										showText = Math.floor(tmpv) + "小时" + showText;
									}

									that.text("剩余时间：" + showText);
									that.attr("starttime", startTime + 1000)
								}
							}
						}, 1000)
					}

					initInterval();
					//输入金额
					$(".canVoteInput").click(function () {
						var that = $(this);

						//计算输入金额 可得收益
						$(".canVoteInput").blur(function () {
							var inputMoney = that.val();
							if (isNaN(inputMoney) == true) {
								that.val(0);
								return false;
							}
							if (that.attr("refundType") == "A") {
								var incomePer = Math.floor(YRHX.licai(inputMoney * 100, sucData["rateByYearTotle"], sucData[
									"loanTimeLimit"]).denge4year()[0]["benxi"] * sucData["loanTimeLimit"] - inputMoney * 100) / 100;
								$(".expect_fee span").text(incomePer);
								this_income.text(incomePer);
							} else if (that.attr("refundType") == "B") {
								//此标投一元钱总收益            按月付息，到期还本
								var incomePer = Math.floor(parseFloat(sucData["rateByYearTotle"] / 12 / 10.0 / 10.0 / 10.0 / 10.0) *
									sucData["loanTimeLimit"] * inputMoney * 100) / 100;
								$(".expect_fee span").text(incomePer);
								this_income.text(incomePer);
							}
							thisincome=this_income.text();

						});
						if (that.attr("querytoggle") == "0") {
							that.attr("querytoggle", "1");
							YRHX.ajax({
								url: CONFIG.getRequestURI("queryBidding4User"),
								data: {
									"loanCode": that.attr("loanCode")
								},
								success: function (sucData) {
									var maxLoanAmountEle = that.attr("maxloanamount") / 100; //最大限制投标金额
									var myMaxloanAmountEle = parseInt(sucData["totalAmount"] / 100); //投资人此标最大投标金额 
									var loanBalanceEle = that.attr("loanbalance") / 100; //标书剩余金额
									var myAvBalanceEle = parseInt(sucData["avBalance"] / 100); //投资人可用余额                          
									var leftLoanAmountEle = Math.abs(maxLoanAmountEle - myMaxloanAmountEle); //投资人剩余投资金额
									var uCanVote = 0;

									if (leftLoanAmountEle - loanBalanceEle >= 0) {
										if (loanBalanceEle - myAvBalanceEle > 0) {
											uCanVote = myAvBalanceEle;
										} else {
											uCanVote = loanBalanceEle;
										}
									} else {
										if (leftLoanAmountEle - myAvBalanceEle > 0) {
											uCanVote = myAvBalanceEle;
										} else {
											uCanVote = leftLoanAmountEle;
										}
									}

									that.val(uCanVote);

								},
								error: function (data) {

									//alert(data.return_info || "获取信息失败");
								}

							});
						}
					});

					$(".canVoteBox").show();
					//立即投标按钮事件
					$("body").delegate("#voteBtn.redBtn", 'click', function () {
						if (YRHX.Cookie("userCode").get()) {
										//投标
										thisbidAmount=$(".canVoteInput").val();
										bidding();
									} else {
										show_login_dialog();
									}
					});

					//未登录状态
					if (!YRHX.Cookie("userCode").get()) {

						$(".uAvBalance").html("您还未登录，请先<a href='javascript:show_login_dialog()'>登录</a>");
					} else {
						$("#goChage").text("充值");
					}

				},
				error: function (data) {
					//alert(data.return_info || "获取信息失败");
				}

			});
		}

		var html_loanInfo_traces = "<tr class='#{isMe}'>";
		html_loanInfo_traces = html_loanInfo_traces + "<td><span class='bid_history_num'>#{num}</span></td>";
		html_loanInfo_traces = html_loanInfo_traces + "<td>#{payUserName}</td>";
		html_loanInfo_traces = html_loanInfo_traces + "<td>#{payAmount}</td>";
		html_loanInfo_traces = html_loanInfo_traces + "<td>#{loanDateTime}</td>";
		html_loanInfo_traces = html_loanInfo_traces + "<td>#{loanType}</td></tr>";

		//投标记录点击事件
		$("#bidHistory").click(function () {
			YRHX.ajax({
				url: CONFIG.getRequestURI("queryLoanTrace"),
				data: {
					loanCode: $("#loanCode").val()
				},
				success: function (sucData) {
					$(".tab_traces").find("tbody").html("");

					var sytbje = sucData["loanBalance"];
					$(".sytbje").text(YRHX.toDecimal2(sytbje / 100, "¥"));
					$(".mqtbze").text(YRHX.toDecimal2((sucData["loanAmount"] - sytbje) / 100, "¥"));
					var rows = sucData["traces"];
					if (rows) {
						var n = 1;
						for (var rowsIndex in rows) {
							var row = rows[rowsIndex];
							row["num"] = n;


							if (YRHX.Cookie("userCode").get()) {
								if (YRHX.Cookie("userCode").get() == row["payUserCode"]) {
									row["isMe"] = "isMe";
								} else {
									row["isMe"] = "";
								}
							}

							row["loanDateTime"] = row["loanDateTime"].dateformat();
							var loanType = '';
							if (row["loanType"] == 'N') {
								loanType = '手动[移动端]';
							} else if (row["loanType"] == 'M') {
								loanType = '手动[网页端]';
							} else {
								loanType = '自动';
							}
							if (row["rankValue"]) {
								loanType += "[" + row["rankValue"] + "]";
							}
							row["loanType"] = loanType;
							if (row["isTransfer"] == "B") {
								row["loanType"] = "债权转让";
							}
							row["payAmount"] = YRHX.toDecimal2(row["payAmount"] / 100, "¥");
							var tmpHtml = html_loanInfo_traces.makeHtml(row);
							$(".tab_traces").find("tbody").append(tmpHtml);
							n++;
						}
					} else {
						/* $(".tab_traces").find("tfoot").html("<h1>暂无投标记录</h1>"); */
					}

				},
				error: function (data) {
					//alert(data.return_info || "获取信息失败");
				}

			});
		})

		/**
		 * 借款人图片资料 
		 */
		$("#loanPics").click(function () {

			if (window.loanPics.length > 0) {
				var loanPicHtml = '';

				for (var i = 0; i < window.loanPics.length; i++) {
					var picPath = "";
					if (window.loanPics[i]) {
						var picList = "http://image1.yrhx.com/" + window.loanPics[i]["code"] + "/loan";
						loanPicHtml += "<img src=" + picList + " class=viewImg />";
						loanPicHtml += "<div class='borrower_images_text'>" + window.loanPics[i]["desc"] + "</div>"
					}
				}
				$(".borrower_images_box").html(loanPicHtml);
			} else {
				//无图片
				$(".borrower_images_box").html("<h1>暂无借款人图片资料 </h1>");
			}
		});


		/**
		 * 还款详情 
		 */
		$("#padBackDetail").click(function () {
			//reciedCount 为已还款期数

			var that = $(this);
			switch (that.attr("refundtype")) {
				case "B": //按月付息，到期还款
					var xiMonth = that.attr("rateByYearTotle") / 1200 * (that.attr("payAmount") / 100); /* / (that.attr("loantimelimit") */

					window.repayDetail = [];
					var repayLen = that.attr("loanTimeLimit");

					for (var j = 0; j < repayLen; j++) {

						if (j == (that.attr("loanTimeLimit") - 1)) {
							var temObeject = {
								ben: that.attr("payAmount"),
								benxi: that.attr("payAmount") * 1 + xiMonth,
								xi: xiMonth
							}
						} else {
							var temObeject = {
								ben: 0,
								benxi: xiMonth,
								xi: xiMonth
							}
						}
						window.repayDetail.push(temObeject);

					}
					break;
				case "A":
					window.repayDetail = YRHX.licai(that.attr("payamount"), that.attr("ratebyyearTotle"), that.attr("loantimelimit"))
						.denge4year();
					break; //按月等额本息
				case "C": //到期还本息
					//TODO
					break;

			}
			var startTime = that.attr("effectDate");

			//table
			var tableEle = $("#payBackTable").find("tbody");
			var tfootEle = $("#payBackTable").find("tfoot");
			tableEle.html("");
			tfootEle.remove();

			for (var i = 0; i < that.attr("loanTimeLimit"); i++) {
				var startTimeArr = startTime.split("-");
				startTimeArr[1]++;
				if (startTimeArr[1] < 10) {
					startTimeArr[1] = "0" + startTimeArr[1];
				}
				if (startTimeArr[1] > 12) {
					startTimeArr[0]++;
					startTimeArr[1] = "01";
				}
				startTime = startTimeArr.join("-");

				//提前还款
				if (that.attr("loanState") == "P") {
					var stateCode = "green";
					var stateName = "还款成功"
				} else {
					if (i > (that.attr("reciedCount") - 1)) {
						var stateCode = "red";
						var stateName = "还款中"
					} else {
						var stateCode = "green";
						var stateName = "还款成功"
					}
				}


				var rowPopHtml = "<tr><td>" + startTime + "</td>";
				rowPopHtml += "<td>" + YRHX.toDecimal2(repayDetail[i].benxi / 100, "¥") + "</td>";
				rowPopHtml += "<td>" + YRHX.toDecimal2(repayDetail[i].ben / 100, "¥") + "</td>";
				rowPopHtml += "<td>" + YRHX.toDecimal2(repayDetail[i].xi / 100, "¥") + "</td>";
				rowPopHtml += "<td class=" + stateCode + ">" + stateName + "</td><tr>";

				tableEle.append(rowPopHtml);

			}




		})

		/**
		 * 根据字符串时间 增加/减少 天数
		 * strDate		日期字符串,如20150629
		 * type			1增加，0减少
		 * day			增加/减少的天数
		 */
		function convertDate(strDate, type, jj) {
			if (strDate.length == 8) {
				var year = parseInt(strDate.substring(0, 4));
				var month = strDate.substring(4, 6);
				var day = strDate.substring(6, 8);
				if (month.substring(0, 1) == "0")
					month = parseInt(month.substring(1, 2));
				if (day.substring(0, 1) == "0")
					day = parseInt(day.substring(1, 2));
				var tmpDate = new Date(year, month - 1, day);
				if (type == 1) {
					tmpDate.setDate(tmpDate.getDate() + jj);
				} else if (type == 0) {
					tmpDate.setDate(tmpDate.getDate() - jj);
				}
				var tmpYear = tmpDate.getFullYear();
				var tmpMonth = tmpDate.getMonth() < 9 ? "0" + (tmpDate.getMonth() + 1) : tmpDate.getMonth();
				var tmpDay = tmpDate.getDate() < 10 ? "0" + tmpDate.getDate() : tmpDate.getDate();
				return "" + tmpYear + tmpMonth + tmpDay;
			}

		}

		/**
		 * 投标
		 */
		var this_amount = $('.this_amount'),
			this_income = $('.this_income'),
			cash = 0,
			final_amount = $('.coupon_foot font'),
			item = $('.coupon_list li'),
			cash_ele = $('.coupon_selected');
		var loan_amount = 0,
			t_code = '';

		function bidding() {
			var bidAmount = $(".canVoteInput").val();
			loan_amount = bidAmount;
			//小数点限制
			if (bidAmount.indexOf(".") > 0) {
				$.popTips("popTipErr", "投标金额必须为大于等于50的整数");
				return false;
			}
			//非数字限制
			if (isNaN(bidAmount) == true) {
				$.popTips("popTipErr", "投标金额必须为大于等于50的整数");
				return false;
			}
			//为空或小于等于零限制
			if (bidAmount == "" || bidAmount <= 0) {
				$.popTips("popTipErr", "投标金额必须为大于等于50的整数");
				return false;
			}
			//剩余可投标金额大于50时 限制，小于50取消限制
			if ($('#voteBtn').attr("loanBalance") / 100 >= 50) {
				if (bidAmount < 50) {
					$.popTips("popTipErr", "投标金额必须为大于等于50的整数");
					return false;
				}
			}
			init_yinying();
			$('body,html').css('overflow', 'hidden');
			to_center($('#yinying').show());
			to_center($('#couponDialog').show());
			this_amount.html(bidAmount);

			//现金券
			ticket(bidAmount,$('#voteBtn').attr("loanMonth"),"A");
		}



		//确认投标
		$('.coupon_confirm').click(function () {
			var that = $(this);
			var bidAmount = parseFloat(this_amount.html());
			if (!flag) {
				flag = true;
				YRHX.ajax({
					url: CONFIG.getRequestURI("bidding"),
					data: {
						loanCode: $("#loanCode").val(),
						payAmount: bidAmount * 100,
						ticket: t_code
					},
					success: function (sucData) {
						$('.suc_icon').text('恭喜您，投标成功');
						$('.suc_icon').removeClass('error');
						$('.suc_next').animate({
							left: '0px'
						}, 500);
					},
					error: function (data) {
						$('.suc_icon').text(data.return_info || "获取信息失败");
						$('.suc_icon').addClass('error');
						$('.suc_next').animate({
							left: '0px'
						}, 500);
					}
				});
			}

		});
	</script>
</body>

</html>